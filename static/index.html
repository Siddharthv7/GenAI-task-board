<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Gen-AI Task Board</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- React -->
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
</head>

<body class="min-h-screen bg-gradient-to-br from-indigo-100 via-purple-100 to-pink-100 flex items-center justify-center">

<div id="root"></div>

<script>
function App() {
  const [tasks, setTasks] = React.useState([]);
  const [title, setTitle] = React.useState("");
  const [progress, setProgress] = React.useState(0);
  const [summary, setSummary] = React.useState("");

  const load = async () => {
    setTasks(await fetch("/tasks").then(r => r.json()));
    setProgress((await fetch("/progress").then(r => r.json())).progress);
    setSummary((await fetch("/ai-summary").then(r => r.json())).message);
  };

  React.useEffect(() => { load(); }, []);

  const addTask = async () => {
    if (!title.trim()) return;
    await fetch("/tasks", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ title })
    });
    setTitle("");
    load();
  };

  const priorityColor = (p) =>
    p === "High" ? "bg-red-100 text-red-600"
    : p === "Medium" ? "bg-yellow-100 text-yellow-700"
    : "bg-green-100 text-green-600";

  return React.createElement("div", { className: "w-full max-w-md" },

    React.createElement("div", { className: "bg-white rounded-2xl shadow-xl p-6" },

      /* Header */
      React.createElement("h1", {
        className: "text-2xl font-bold text-center mb-1"
      }, "ðŸ¤– Gen-AI Task Assistant"),

      React.createElement("p", {
        className: "text-sm text-center text-gray-500 mb-4"
      }, "AI-inspired task understanding & prioritization"),

      /* Input */
      React.createElement("div", { className: "flex gap-2 mb-4" },
        React.createElement("input", {
          className: "flex-1 border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-400",
          placeholder: "What do you want to do?",
          value: title,
          onChange: e => setTitle(e.target.value)
        }),
        React.createElement("button", {
          onClick: addTask,
          className: "bg-indigo-500 hover:bg-indigo-600 text-white px-4 rounded-lg"
        }, "Add")
      ),

      /* Task List */
      React.createElement("div", { className: "space-y-3" },
        tasks.map(t =>
          React.createElement("div", {
            key: t.id,
            className: "flex justify-between items-start bg-gray-50 p-3 rounded-lg hover:shadow transition"
          },

            React.createElement("div", null,
              React.createElement("div", { className: "flex items-center gap-2" },
                React.createElement("input", {
                  type: "checkbox",
                  checked: t.completed,
                  onChange: async () => {
                    await fetch("/tasks/" + t.id, { method: "PUT" });
                    load();
                  }
                }),
                React.createElement("span", {
                  className: t.completed
                    ? "line-through text-gray-400"
                    : "font-medium"
                }, t.title)
              ),

              React.createElement("div", { className: "flex gap-2 mt-1 text-xs" },
                React.createElement("span", {
                  className: "bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full"
                }, "ðŸ§  " + t.category),

                React.createElement("span", {
                  className: "px-2 py-0.5 rounded-full " + priorityColor(t.priority)
                }, t.priority)
              )
            ),

            React.createElement("button", {
              className: "text-red-400 hover:text-red-600",
              onClick: async () => {
                await fetch("/tasks/" + t.id, { method: "DELETE" });
                load();
              }
            }, "âœ•")
          )
        )
      ),

      /* Progress */
      React.createElement("div", { className: "mt-5" },
        React.createElement("div", { className: "flex justify-between text-sm mb-1" },
          React.createElement("span", null, "Progress"),
          React.createElement("span", null, progress + "%")
        ),
        React.createElement("div", { className: "bg-gray-200 h-2 rounded-full overflow-hidden" },
          React.createElement("div", {
            className: "bg-green-500 h-2 transition-all duration-500",
            style: { width: progress + "%" }
          })
        )
      ),

      /* AI Summary */
      React.createElement("div", {
        className: "mt-4 bg-indigo-50 border border-indigo-200 rounded-lg p-3 text-sm text-indigo-700"
      }, "ðŸ¤– ", summary)

    )
  );
}

ReactDOM.createRoot(document.getElementById("root"))
  .render(React.createElement(App));
</script>

</body>
</html>
